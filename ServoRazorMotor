import RPi.GPIO as GPIO
import time

servo_pin = #any
button_pin = #any

GPIO.setmode(GPIO.BCM)
GPIO.setup(servo_pin, GPIO.OUT)
GPIO.setup(button_pin, GPIO.IN, pull_up_down=GPIO.PUD_UP)

pwm = GPIO.PWM(servo_pin, 50)   #50 Hz frequency
pwm.start(0)   #Initial duty cycle

def button_callback(channel):
    print("Button pressed!") 
    for i in range(15):  # Loop 15 times
        # Move servo arm to the right
        pwm.ChangeDutyCycle(2.5)
        time.sleep(0.05)

        # Move servo arm to the left
        pwm.ChangeDutyCycle(4.5)
        time.sleep(0.05)

# Detect a falling edge on the button pin,(the state of the button pin changed from high to low) and debounces it with a 200ms delay
GPIO.add_event_detect(button_pin, GPIO.FALLING, callback=button_callback, bouncetime=200)

try:
    while True:
        time.sleep(0.1)  
finally:
    pwm.stop()
    GPIO.cleanup()

